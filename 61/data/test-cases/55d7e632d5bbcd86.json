{"uid":"55d7e632d5bbcd86","name":"test_cartRebuild_afterStaging_returns400AndError[User.SUPERUSER]","fullName":"tests.metro.test_cart_build.TestCreateCart#test_cartRebuild_afterStaging_returns400AndError","historyId":"f5e244c5942994d0ed89ca47797998af","time":{"start":1689130779806,"stop":1689130780674,"duration":868},"status":"broken","statusMessage":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","statusTrace":"self = <test_cart_build.TestCreateCart object at 0x7f1bb4d3b610>\nclient = <core.http_client.HTTPClient object at 0x7f1bb4da6710>\nuser = <User.SUPERUSER: 'superuser'>\nrequest = <FixtureRequest for <Function test_cartRebuild_afterStaging_returns400AndError[User.SUPERUSER]>>\n\n    @users(User.SUPERUSER)\n    def test_cartRebuild_afterStaging_returns400AndError(self, client, user, request):\n        # Arrange\n        setup = request.getfixturevalue('staging')\n        metro_qr_code = setup.get('metro_qr_code')\n        metro_config_qr_code = setup.get('metro_config_qr_code')\n    \n        # Act\n        payload = data.fake.model.cart(\n            metro_qr_code=metro_qr_code,\n            metro_config_qr_code=metro_config_qr_code,\n            is_rebuild=True\n        )\n>       response, model = CartBuildAPI(client).create_cart(data=payload)\n\ntests/metro/test_cart_build.py:75: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \napi/endpoints/metro/cart_build_api.py:23: in create_cart\n    response_payload = CreateCartSuccessResponse(**response.json())\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\n>   ???\nE   pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\nE   data -> id\nE     field required (type=value_error.missing)\nE   data -> created_at\nE     field required (type=value_error.missing)\nE   data -> updated_at\nE     field required (type=value_error.missing)\nE   data -> metro\nE     field required (type=value_error.missing)\nE   data -> metro_config\nE     field required (type=value_error.missing)\nE   data -> is_rebuild\nE     field required (type=value_error.missing)\n\npydantic/main.py:341: ValidationError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":3,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1689130468925,"stop":1689130468940,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"client","time":{"start":1689130468940,"stop":1689130468940,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"users","time":{"start":1689130779805,"stop":1689130779805,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"assign_metro","time":{"start":1689130779806,"stop":1689130779806,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"create_fake_order_superuser","time":{"start":1689130779806,"stop":1689130779806,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"staging","time":{"start":1689130779806,"stop":1689130780621,"duration":815},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"create_fake_facility","time":{"start":1689130779806,"stop":1689130779806,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"create_fake_cart_superuser","time":{"start":1689130779806,"stop":1689130779806,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"afterStages":[{"name":"assign_metro::0","time":{"start":1689130780680,"stop":1689130780680,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"create_fake_cart_superuser::0","time":{"start":1689130780681,"stop":1689130780897,"duration":216},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"create_fake_order_superuser::0","time":{"start":1689130780897,"stop":1689130780992,"duration":95},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"create_fake_facility::0","time":{"start":1689130780993,"stop":1689130781081,"duration":88},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"client::0","time":{"start":1689130826610,"stop":1689130826611,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"labels":[{"name":"parentSuite","value":"tests.metro"},{"name":"suite","value":"test_cart_build"},{"name":"subSuite","value":"TestCreateCart"},{"name":"host","value":"fv-az360-89"},{"name":"thread","value":"2442-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.metro.test_cart_build"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"user","value":"<User.SUPERUSER: 'superuser'>"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"d009967ca83e6ab0","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1689130778496,"stop":1689130779397,"duration":901}},{"uid":"4970efc4af27d6ab","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1689130777202,"stop":1689130778098,"duration":896}},{"uid":"fa10135cce387f1a","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1689130775939,"stop":1689130776793,"duration":854}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":23,"broken":10,"skipped":0,"passed":14,"unknown":0,"total":47},"items":[{"uid":"9bd80840f87e09d8","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/60//#testresult/9bd80840f87e09d8","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1689044042361,"stop":1689044043598,"duration":1237}},{"uid":"f3e54972c85675c1","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/59//#testresult/f3e54972c85675c1","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1688958255436,"stop":1688958256352,"duration":916}},{"uid":"813bdf8ec1b332a5","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/58//#testresult/813bdf8ec1b332a5","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1688872162532,"stop":1688872163787,"duration":1255}},{"uid":"3b1053cc4934f971","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/57//#testresult/3b1053cc4934f971","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1688785265857,"stop":1688785266783,"duration":926}},{"uid":"522543cc2f33fa25","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/114//#testresult/522543cc2f33fa25","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1688702731044,"stop":1688702732028,"duration":984}},{"uid":"49b03154f409756b","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/56//#testresult/49b03154f409756b","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1688698822706,"stop":1688698823963,"duration":1257}},{"uid":"eedd69e833b067a2","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/55//#testresult/eedd69e833b067a2","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1688612578356,"stop":1688612579241,"duration":885}},{"uid":"27aa0086b9950f36","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/54//#testresult/27aa0086b9950f36","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'id'","time":{"start":1688526058084,"stop":1688526058318,"duration":234}},{"uid":"437d7abf5678a64a","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/53//#testresult/437d7abf5678a64a","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'id'","time":{"start":1688439729260,"stop":1688439729485,"duration":225}},{"uid":"7addf4503bc926d9","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/52//#testresult/7addf4503bc926d9","status":"failed","statusDetails":"AssertionError: assert \"This metro can not go through Cart Build process because it's now in Ready for Delivery process status\" == 'Metro is already staged.'\n  - Metro is already staged.\n  + This metro can not go through Cart Build process because it's now in Ready for Delivery process status","time":{"start":1688353223158,"stop":1688353224885,"duration":1727}},{"uid":"6e55548e927763af","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/51//#testresult/6e55548e927763af","status":"failed","statusDetails":"AssertionError: assert \"This metro can not go through Cart Build process because it's now in Ready for Delivery process status\" == 'Metro is already staged.'\n  - Metro is already staged.\n  + This metro can not go through Cart Build process because it's now in Ready for Delivery process status","time":{"start":1688267057983,"stop":1688267058881,"duration":898}},{"uid":"b940772a2cbde488","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/50//#testresult/b940772a2cbde488","status":"failed","statusDetails":"AssertionError: assert \"This metro can not go through Cart Build process because it's now in Ready for Delivery process status\" == 'Metro is already staged.'\n  - Metro is already staged.\n  + This metro can not go through Cart Build process because it's now in Ready for Delivery process status","time":{"start":1688180920495,"stop":1688180922235,"duration":1740}},{"uid":"4a353fcc657a221","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/49//#testresult/4a353fcc657a221","status":"failed","statusDetails":"AssertionError: assert \"This metro can not go through Cart Build process because it's now in Ready for Delivery process status\" == 'Metro is already staged.'\n  - Metro is already staged.\n  + This metro can not go through Cart Build process because it's now in Ready for Delivery process status","time":{"start":1688093597116,"stop":1688093598761,"duration":1645}},{"uid":"3ba85aa7f67ed7b9","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/48//#testresult/3ba85aa7f67ed7b9","status":"failed","statusDetails":"AssertionError: assert \"This metro can not go through Cart Build process because it's now in Ready for Delivery process status\" == 'Metro is already staged.'\n  - Metro is already staged.\n  + This metro can not go through Cart Build process because it's now in Ready for Delivery process status","time":{"start":1688007378623,"stop":1688007379747,"duration":1124}},{"uid":"547044e977c971e0","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/47//#testresult/547044e977c971e0","status":"failed","statusDetails":"AssertionError: assert \"This metro can not go through Cart Build process because it's now in Ready for Delivery process status\" == 'Metro is already staged.'\n  - Metro is already staged.\n  + This metro can not go through Cart Build process because it's now in Ready for Delivery process status","time":{"start":1687921148975,"stop":1687921149804,"duration":829}},{"uid":"42513ada515f01ca","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/46//#testresult/42513ada515f01ca","status":"failed","statusDetails":"AssertionError: assert \"This metro can not go through Cart Build process because it's now in Ready for Delivery process status\" == 'Metro is already staged.'\n  - Metro is already staged.\n  + This metro can not go through Cart Build process because it's now in Ready for Delivery process status","time":{"start":1687834908594,"stop":1687834910308,"duration":1714}},{"uid":"7749ae53e360a8e3","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/45//#testresult/7749ae53e360a8e3","status":"failed","statusDetails":"AssertionError: assert \"This metro can not go through Cart Build process because it's now in Ready for Delivery process status\" == 'Metro is already staged.'\n  - Metro is already staged.\n  + This metro can not go through Cart Build process because it's now in Ready for Delivery process status","time":{"start":1687748766733,"stop":1687748768464,"duration":1731}},{"uid":"1c052eb1782daf08","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/44//#testresult/1c052eb1782daf08","status":"failed","statusDetails":"AssertionError: assert \"This metro can not go through Cart Build process because it's now in Ready for Delivery process status\" == 'Metro is already staged.'\n  - Metro is already staged.\n  + This metro can not go through Cart Build process because it's now in Ready for Delivery process status","time":{"start":1687662788772,"stop":1687662790484,"duration":1712}},{"uid":"8f181fa4b9f2c336","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/43//#testresult/8f181fa4b9f2c336","status":"failed","statusDetails":"AssertionError: assert \"This metro can not go through Cart Build process because it's now in Ready for Delivery process status\" == 'Metro is already staged.'\n  - Metro is already staged.\n  + This metro can not go through Cart Build process because it's now in Ready for Delivery process status","time":{"start":1687575584799,"stop":1687575586238,"duration":1439}},{"uid":"df7827e40e1c5faf","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/113//#testresult/df7827e40e1c5faf","status":"failed","statusDetails":"AssertionError: assert \"This metro can not go through Cart Build process because it's now in Ready for Delivery process status\" == 'Metro is already staged.'\n  - Metro is already staged.\n  + This metro can not go through Cart Build process because it's now in Ready for Delivery process status","time":{"start":1687539753861,"stop":1687539754728,"duration":867}}]},"tags":[]},"source":"55d7e632d5bbcd86.json","parameterValues":["<User.SUPERUSER: 'superuser'>"]}