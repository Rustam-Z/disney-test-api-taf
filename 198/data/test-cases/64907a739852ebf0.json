{"uid":"64907a739852ebf0","name":"test_cartRebuild_afterStaging_returns400AndError[User.SUPERUSER]","fullName":"tests.metro.test_cart_build.TestCreateCart#test_cartRebuild_afterStaging_returns400AndError","historyId":"f5e244c5942994d0ed89ca47797998af","time":{"start":1700966342181,"stop":1700966342704,"duration":523},"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'id'","statusTrace":"self = <test_cart_build.TestCreateCart object at 0x7f4182548b50>\nclient = <core.http_client.HTTPClient object at 0x7f4182169b90>\nuser = <User.SUPERUSER: 'superuser'>\nrequest = <FixtureRequest for <Function test_cartRebuild_afterStaging_returns400AndError[User.SUPERUSER]>>\n\n    @users(User.SUPERUSER)\n    def test_cartRebuild_afterStaging_returns400AndError(self, client, user, request):\n        # Arrange\n>       setup = request.getfixturevalue('staging')\n\ntests/metro/test_cart_build.py:65: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../../.cache/pypoetry/virtualenvs/disney-test-api-taf-A9L5E0vM-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:570: in getfixturevalue\n    fixturedef = self._get_active_fixturedef(argname)\n../../../.cache/pypoetry/virtualenvs/disney-test-api-taf-A9L5E0vM-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:592: in _get_active_fixturedef\n    self._compute_fixture_value(fixturedef)\n../../../.cache/pypoetry/virtualenvs/disney-test-api-taf-A9L5E0vM-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:678: in _compute_fixture_value\n    fixturedef.execute(request=subrequest)\n../../../.cache/pypoetry/virtualenvs/disney-test-api-taf-A9L5E0vM-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:1076: in execute\n    result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\n../../../.cache/pypoetry/virtualenvs/disney-test-api-taf-A9L5E0vM-py3.11/lib/python3.11/site-packages/pluggy/_hooks.py:265: in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\n../../../.cache/pypoetry/virtualenvs/disney-test-api-taf-A9L5E0vM-py3.11/lib/python3.11/site-packages/pluggy/_manager.py:80: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n../../../.cache/pypoetry/virtualenvs/disney-test-api-taf-A9L5E0vM-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:1130: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n../../../.cache/pypoetry/virtualenvs/disney-test-api-taf-A9L5E0vM-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:909: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\nfixtures/staging.py:68: in staging\n    setup = request.getfixturevalue('assign_metro')()\nfixtures/staging.py:37: in _fixture\n    cart_payload, cart_response, cart_model = create_fake_cart_superuser(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nkwargs = {'facility_id': 13456}, facility_id = 13456\ncategory_payload = {'name': 'Robert Jackson'}\ncategory_response = <Response [400]>\ncategory_model = ErrorResponse(status=False, message='Error', data=None, error={'name': ['inventory category with this name already exists.']})\n\n    def _fixture(**kwargs):\n        # Arrange\n    \n        # Create facility\n        if 'facility_id' not in kwargs:\n            facility_payload, facility_response, facility_model = create_fake_facility(no_of_customers=1)\n            kwargs['facility_id'] = facility_model.data.id\n        facility_id = kwargs['facility_id']\n    \n        # Create inventory category\n        category_payload = data.fake.model.inventory_category()\n        category_response, category_model = InventoryCategoryAPI(client).create_category(data=category_payload)\n        nonlocal category_id\n>       category_id = category_model.data.id\nE       AttributeError: 'NoneType' object has no attribute 'id'\n\nfixtures/cart_build.py:33: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":3,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1700965561711,"stop":1700965561728,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"client","time":{"start":1700965561728,"stop":1700965561729,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"users","time":{"start":1700966342180,"stop":1700966342180,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"create_fake_cart_superuser","time":{"start":1700966342181,"stop":1700966342181,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"assign_metro","time":{"start":1700966342181,"stop":1700966342181,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"create_fake_order_superuser","time":{"start":1700966342181,"stop":1700966342181,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"create_fake_facility","time":{"start":1700966342181,"stop":1700966342181,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"afterStages":[{"name":"create_fake_cart_superuser::0","time":{"start":1700966342805,"stop":1700966343408,"duration":603},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"assign_metro::0","time":{"start":1700966342805,"stop":1700966342805,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"create_fake_order_superuser::0","time":{"start":1700966343409,"stop":1700966343529,"duration":120},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"create_fake_facility::0","time":{"start":1700966343529,"stop":1700966343666,"duration":137},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"client::0","time":{"start":1700966418986,"stop":1700966418987,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"parentSuite","value":"tests.metro"},{"name":"suite","value":"test_cart_build"},{"name":"subSuite","value":"TestCreateCart"},{"name":"host","value":"fv-az1111-212"},{"name":"thread","value":"2429-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.metro.test_cart_build"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"user","value":"<User.SUPERUSER: 'superuser'>"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"497734bafeec56fa","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1700966339719,"stop":1700966341464,"duration":1745}},{"uid":"b2c2588e421956c2","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'id'","time":{"start":1700966338334,"stop":1700966338580,"duration":246}},{"uid":"3d188c839431b4a7","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'id'","time":{"start":1700966337012,"stop":1700966337265,"duration":253}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":6,"skipped":0,"passed":0,"unknown":0,"total":6},"items":[{"uid":"3a95a0a5ba4cbfd3","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/197//#testresult/3a95a0a5ba4cbfd3","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'id'","time":{"start":1700879589059,"stop":1700879589415,"duration":356}},{"uid":"6704420b8d2ab91b","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/196//#testresult/6704420b8d2ab91b","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1700793351337,"stop":1700793352658,"duration":1321}},{"uid":"1330658d4235bef","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/195//#testresult/1330658d4235bef","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1700707009385,"stop":1700707010391,"duration":1006}},{"uid":"2ddabfd4e5b999fd","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/194//#testresult/2ddabfd4e5b999fd","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1700620881504,"stop":1700620883225,"duration":1721}},{"uid":"8845a6dc23911156","reportUrl":"https://Rustam-Z.github.io/disney-test-api-taf/193//#testresult/8845a6dc23911156","status":"broken","statusDetails":"pydantic.error_wrappers.ValidationError: 6 validation errors for CreateCartSuccessResponse\ndata -> id\n  field required (type=value_error.missing)\ndata -> created_at\n  field required (type=value_error.missing)\ndata -> updated_at\n  field required (type=value_error.missing)\ndata -> metro\n  field required (type=value_error.missing)\ndata -> metro_config\n  field required (type=value_error.missing)\ndata -> is_rebuild\n  field required (type=value_error.missing)","time":{"start":1700534417873,"stop":1700534418816,"duration":943}}]},"tags":[]},"source":"64907a739852ebf0.json","parameterValues":["<User.SUPERUSER: 'superuser'>"]}